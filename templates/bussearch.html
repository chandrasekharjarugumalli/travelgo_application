{% extends "base.html" %}
{% block title %}Search Buses - TravelGo{% endblock %}

{% block content %}
<div class="relative min-h-screen bg-gray-800">
    <!-- Background Image -->
    <div class="absolute inset-0 bg-cover bg-center" style="background-image: url('https://images.unsplash.com/photo-1570125909232-eb263c186922?q=80&w=1974&auto=format&fit=crop');"></div>
    <div class="absolute inset-0 bg-black bg-opacity-70"></div>

    <!-- Page Content -->
    <div class="relative container mx-auto px-6 py-12">
        <!-- Search Form -->
        <div class="bg-white/20 backdrop-blur-sm p-8 rounded-lg">
            <h2 class="text-2xl font-bold text-yellow-400 mb-4">ðŸšŒ Search & Book Buses</h2>
            <form method="POST" action="{{ url_for('bus_search') }}" class="grid grid-cols-1 md:grid-cols-5 gap-4 items-end text-black">
                <input type="text" name="from_city" placeholder="From" class="p-3 rounded-md focus:ring-yellow-500 focus:border-yellow-500">
                <input type="text" name="to_city" placeholder="To" class="p-3 rounded-md focus:ring-yellow-500 focus:border-yellow-500">
                <input type="date" name="travel_date" value="{{ request.form.get('travel_date', today_date) }}" class="p-3 rounded-md focus:ring-yellow-500 focus:border-yellow-500">
                <input type="number" name="passengers" placeholder="1" class="p-3 rounded-md focus:ring-yellow-500 focus:border-yellow-500" min="1">
                <button type="submit" class="bg-yellow-500 text-black font-bold p-3 rounded-md hover:bg-yellow-600 transition duration-300">Search</button>
            </form>
        </div>

        <!-- Bus Listings -->
        {% if services %}
        <div class="mt-8 bg-white/20 backdrop-blur-sm p-8 rounded-lg text-white">
            <div class="space-y-4">
                {% for service in services %}
                <div class="flex justify-between items-center p-4 bg-gray-900/50 rounded-md hover:bg-gray-900/70 transition duration-300">
                    <div>
                        <h3 class="font-bold text-lg text-yellow-300">{{ service.name }}</h3>
                        <p class="text-sm font-semibold">{{ service.from_city }} to {{ service.to_city }}</p>
                        <p class="text-xs mt-1">{{ service.details }} â€¢ Departs: {{ service.departure_time }}</p>
                    </div>
                    <div class="text-right">
                        <p class="text-xl font-bold">${{ "%.2f"|format(service.price) }}</p>
                        <a href="{{ url_for('select_seats', service_id=service.id, travel_date=request.form.get('travel_date', today_date)) }}" class="mt-2 inline-block bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">Book Now</a>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
        {% elif request.method == 'POST' %}
        <div class="mt-8 bg-white/20 backdrop-blur-sm p-8 rounded-lg text-white text-center">
            <p class="text-gray-300">No bus services found for your search criteria. Please try again.</p>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}
